<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>ES6 新增好用的运算符 | daisy-vue</title>
    <meta name="description" content="Vue.js 3 Component Library">
    <link rel="stylesheet" href="./assets/style.4285ba8f.css">
    <link rel="modulepreload" href="./assets/Home.c5e8e226.js">
    <link rel="modulepreload" href="./assets/app.6f31ad5d.js">
    <link rel="modulepreload" href="./assets/learns_javascript_es6-new-operators.md.e2720d3a.lean.js">
    <link rel="modulepreload" href="./assets/app.6f31ad5d.js">
    <meta name="twitter:title" content="ES6 新增好用的运算符 | daisy-vue">
    <meta property="og:title" content="ES6 新增好用的运算符 | daisy-vue">
  </head>
  <body>
    <div id="app"><!--[--><div class="read-pro" data-v-069192e1><div class="read-pro__inner" data-v-069192e1></div></div><!--[--><div class="no-sidebar theme"><header class="nav-bar" data-v-675d8756><div class="sidebar-button" data-v-675d8756><svg class="icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z" class></path></svg></div><a class="nav-bar-title" href="./" aria-label="daisy-vue, back to home" data-v-675d8756 data-v-4a583abe><!----> daisy-vue</a><div class="flex-grow" data-v-675d8756></div><div class="nav" data-v-675d8756><nav class="nav-links" data-v-675d8756 data-v-eab3edfe><!--[--><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item" href="./getting-started" data-v-b8818f8c>首页 <!----></a></div></div><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item" href="./components/index" data-v-b8818f8c>组件 <!----></a></div></div><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item" href="./utils/index" data-v-b8818f8c>utils <!----></a></div></div><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item active" href="./learns/index" data-v-b8818f8c>Reference <!----></a></div></div><!--]--><!----><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item isExternal" href="https://github.com/qiuquanwu/daisy-vue" target="_blank" rel="noopener noreferrer" data-v-b8818f8c>GitHub <svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-b8818f8c><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div></div></nav></div><!--[--><!--]--></header><aside class="sidebar" data-v-83e92a68><nav class="nav-links nav" data-v-83e92a68 data-v-eab3edfe><!--[--><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item" href="./getting-started" data-v-b8818f8c>首页 <!----></a></div></div><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item" href="./components/index" data-v-b8818f8c>组件 <!----></a></div></div><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item" href="./utils/index" data-v-b8818f8c>utils <!----></a></div></div><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item active" href="./learns/index" data-v-b8818f8c>Reference <!----></a></div></div><!--]--><!----><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item isExternal" href="https://github.com/qiuquanwu/daisy-vue" target="_blank" rel="noopener noreferrer" data-v-b8818f8c>GitHub <svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-b8818f8c><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div></div></nav><!--[--><!--]--><!----><!--[--><!--]--></aside><!-- TODO: make this button accessible --><div class="sidebar-mask"></div><main class="page" data-v-7eddb2c4><div class="container" data-v-7eddb2c4><!--[--><!--]--><div style="position:relative;" class="content" data-v-7eddb2c4><div><p><div class="table-of-contents"><ul><li><a href="#指数运算符">指数运算符</a></li><li><a href="#链判断运算符">链判断运算符</a></li><li><a href="#null-判断运算符">Null 判断运算符</a></li><li><a href="#逻辑赋值运算符">逻辑赋值运算符</a></li></ul></div></p><h1 id="es6-新增好用的运算符" tabindex="-1">ES6 新增好用的运算符 <a class="header-anchor" href="#es6-新增好用的运算符" aria-hidden="true">#</a></h1><h2 id="指数运算符" tabindex="-1">指数运算符 <a class="header-anchor" href="#指数运算符" aria-hidden="true">#</a></h2><div class="code-block" data-v-4a08e5d5><!----><!--[--><div class="language-js line-numbers-mode"><pre><code><span class="token number">2</span> <span class="token operator">**</span> <span class="token number">2</span><span class="token punctuation">;</span> <span class="token comment">// 4</span>
<span class="token number">2</span> <span class="token operator">**</span> <span class="token number">3</span><span class="token punctuation">;</span> <span class="token comment">// 8</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><!--]--></div><div class="danger custom-block"><p class="custom-block-title">WARNING</p><p>这个运算符的一个特点是<strong>右结合</strong>，而不是常见的左结合。多个指数运算符连用时，是<strong>从最右边开始计算</strong>的。</p></div><div class="code-block" data-v-4a08e5d5><!----><!--[--><div class="language-js line-numbers-mode"><pre><code><span class="token number">2</span> <span class="token operator">**</span> <span class="token punctuation">(</span><span class="token number">3</span> <span class="token operator">**</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 相当于 2 ** (3 ** 2)</span>
<span class="token comment">// 512</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><!--]--></div><p>上面代码中，首先计算的是第二个指数运算符，而不是第一个。</p><p>指数运算符可以与等号结合，形成一个新的赋值运算符（**=）。</p><div class="code-block" data-v-4a08e5d5><!----><!--[--><div class="language-js line-numbers-mode"><pre><code><span class="token keyword">let</span> a <span class="token operator">=</span> <span class="token number">1.5</span><span class="token punctuation">;</span>
a <span class="token operator">**=</span> <span class="token number">2</span><span class="token punctuation">;</span>
<span class="token comment">// 等同于 a = a * a;</span>

<span class="token keyword">let</span> b <span class="token operator">=</span> <span class="token number">4</span><span class="token punctuation">;</span>
b <span class="token operator">**=</span> <span class="token number">3</span><span class="token punctuation">;</span>
<span class="token comment">// 等同于 b = b * b * b;</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><!--]--></div><h2 id="链判断运算符" tabindex="-1">链判断运算符 <a class="header-anchor" href="#链判断运算符" aria-hidden="true">#</a></h2><p>编程实务中，如果读取对象内部的某个属性，往往需要判断一下，属性的上层对象是否存在。比如，读取 message.body.user.firstName 这个属性，安全的写法是写成下面这样。</p><div class="code-block" data-v-4a08e5d5><!----><!--[--><div class="language-js line-numbers-mode"><pre><code><span class="token comment">// 错误的写法</span>
<span class="token keyword">const</span> firstName <span class="token operator">=</span> message<span class="token punctuation">.</span>body<span class="token punctuation">.</span>user<span class="token punctuation">.</span>firstName <span class="token operator">||</span> <span class="token string">&#39;default&#39;</span><span class="token punctuation">;</span>

<span class="token comment">// 正确的写法</span>
<span class="token keyword">const</span> firstName <span class="token operator">=</span> <span class="token punctuation">(</span>message <span class="token operator">&amp;&amp;</span> message<span class="token punctuation">.</span>body <span class="token operator">&amp;&amp;</span> message<span class="token punctuation">.</span>body<span class="token punctuation">.</span>user <span class="token operator">&amp;&amp;</span> message<span class="token punctuation">.</span>body<span class="token punctuation">.</span>user<span class="token punctuation">.</span>firstName<span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token string">&#39;default&#39;</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><!--]--></div><p>上面例子中，firstName 属性在对象的第四层，所以需要判断四次，每一层是否有值。</p><p>三元运算符?:也常用于判断对象是否存在。</p><div class="code-block" data-v-4a08e5d5><!----><!--[--><div class="language-js line-numbers-mode"><pre><code><span class="token keyword">const</span> fooInput <span class="token operator">=</span> myForm<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">&#39;input[name=foo]&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> fooValue <span class="token operator">=</span> fooInput <span class="token operator">?</span> fooInput<span class="token punctuation">.</span>value <span class="token operator">:</span> <span class="token keyword">undefined</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><!--]--></div><p>上面例子中，必须先判断 fooInput 是否存在，才能读取 fooInput.value。这样的层层判断非常麻烦，因此 ES2020 引入了“链判断运算符”（optional chaining operator）?.，简化上面的写法</p><div class="code-block" data-v-4a08e5d5><!----><!--[--><div class="language-js line-numbers-mode"><pre><code><span class="token keyword">const</span> firstName <span class="token operator">=</span> message<span class="token operator">?.</span>body<span class="token operator">?.</span>user<span class="token operator">?.</span>firstName <span class="token operator">||</span> <span class="token string">&#39;default&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> fooValue <span class="token operator">=</span> myForm<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">&#39;input[name=foo]&#39;</span><span class="token punctuation">)</span><span class="token operator">?.</span>value<span class="token punctuation">;</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><!--]--></div><p>上面代码使用了?.运算符，直接在链式调用的时候判断，左侧的对象是否为 null 或 undefined。如果是的，就不再往下运算，而是返回 undefined。</p><p>下面是判断对象方法是否存在，如果存在就立即执行的例子。</p><div class="code-block" data-v-4a08e5d5><!----><!--[--><div class="language-js line-numbers-mode"><pre><code>iterator<span class="token punctuation">.</span>return<span class="token operator">?.</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><!--]--></div><p>上面代码中，iterator.return 如果有定义，就会调用该方法，否则 iterator.return 直接返回 undefined，不再执行?.后面的部分。</p><p>对于那些可能没有实现的方法，这个运算符尤其有用。</p><div class="code-block" data-v-4a08e5d5><!----><!--[--><div class="language-js line-numbers-mode"><pre><code><span class="token keyword">if</span> <span class="token punctuation">(</span>myForm<span class="token punctuation">.</span>checkValidity<span class="token operator">?.</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 表单校验失败</span>
  <span class="token keyword">return</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><!--]--></div><p>上面代码中，老式浏览器的表单对象可能没有 checkValidity()这个方法，这时?.运算符就会返回 undefined，判断语句就变成了 undefined === false，所以就会跳过下面的代码。</p><p>链判断运算符?.有三种写法。</p><ul><li>obj?.prop // 对象属性是否存在</li><li>obj?.[expr] // 同上</li><li>func?.(...args) // 函数或对象方法是否存在</li></ul><p>下面是 obj?.[expr]用法的一个例子。</p><div class="code-block" data-v-4a08e5d5><!----><!--[--><div class="language-js line-numbers-mode"><pre><code><span class="token keyword">let</span> hex <span class="token operator">=</span> <span class="token string">&#39;#C0FFEE&#39;</span><span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">#([A-Z]+)</span><span class="token regex-delimiter">/</span><span class="token regex-flags">i</span></span><span class="token punctuation">)</span><span class="token operator">?.</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><!--]--></div><p>上面例子中，字符串的 match()方法，如果没有发现匹配会返回 null，如果发现匹配会返回一个数组，?.运算符起到了判断作用。</p><p>下面是?.运算符常见形式，以及不使用该运算符时的等价形式。</p><div class="code-block" data-v-4a08e5d5><!----><!--[--><div class="language-js line-numbers-mode"><pre><code>a<span class="token operator">?.</span>b<span class="token punctuation">;</span>
<span class="token comment">// 等同于</span>
a <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">?</span> <span class="token keyword">undefined</span> <span class="token operator">:</span> a<span class="token punctuation">.</span>b<span class="token punctuation">;</span>

a<span class="token operator">?.</span><span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token comment">// 等同于</span>
a <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">?</span> <span class="token keyword">undefined</span> <span class="token operator">:</span> a<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">;</span>

a<span class="token operator">?.</span><span class="token function">b</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 等同于</span>
a <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">?</span> <span class="token keyword">undefined</span> <span class="token operator">:</span> a<span class="token punctuation">.</span><span class="token function">b</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

a<span class="token operator">?.</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 等同于</span>
a <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">?</span> <span class="token keyword">undefined</span> <span class="token operator">:</span> <span class="token function">a</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><!--]--></div><div class="danger custom-block"><p class="custom-block-title">WARNING</p><p>上面代码中，特别注意后两种形式，如果 a?.b()和 a?.()。如果 a?.b()里面的 a.b 有值，但不是函数，不可调用，那么 a?.b()是会报错的。a?.()也是如此，如果 a 不是 null 或 undefined，但也不是函数，那么 a?.()会报错。</p></div><p>使用这个运算符，有<strong>几个注意点</strong>。</p><p>（1）短路机制</p><p>本质上，?.运算符相当于一种短路机制，只要不满足条件，就不再往下执行。</p><div class="code-block" data-v-4a08e5d5><!----><!--[--><div class="language-js line-numbers-mode"><pre><code>a<span class="token operator">?.</span><span class="token punctuation">[</span><span class="token operator">++</span>x<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token comment">// 等同于</span>
a <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">?</span> <span class="token keyword">undefined</span> <span class="token operator">:</span> a<span class="token punctuation">[</span><span class="token operator">++</span>x<span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><!--]--></div><p>上面代码中，如果 a 是 undefined 或 null，那么 x 不会进行递增运算。也就是说，链判断运算符一旦为真，右侧的表达式就不再求值。</p><p>（2）括号的影响</p><p>如果属性链有圆括号，链判断运算符对圆括号外部没有影响，只对圆括号内部有影响。</p><div class="code-block" data-v-4a08e5d5><!----><!--[--><div class="language-js line-numbers-mode"><pre><code><span class="token punctuation">(</span>a<span class="token operator">?.</span>b<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">c</span><span class="token punctuation">(</span>
  <span class="token comment">// 等价于</span>
  a <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">?</span> <span class="token keyword">undefined</span> <span class="token operator">:</span> a<span class="token punctuation">.</span>b
<span class="token punctuation">)</span><span class="token punctuation">.</span>c<span class="token punctuation">;</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><!--]--></div><p>上面代码中，?.对圆括号外部没有影响，不管 a 对象是否存在，<strong>圆括号后面的.c 总是会执行</strong>。</p><blockquote><p>一般来说，使用?.运算符的场合，不应该使用圆括号。</p></blockquote><p>（3）报错场合</p><p>以下写法是禁止的，会报错。</p><div class="code-block" data-v-4a08e5d5><!----><!--[--><div class="language-js line-numbers-mode"><pre><code><span class="token comment">// 构造函数</span>
<span class="token keyword">new</span> <span class="token class-name">a</span><span class="token operator">?.</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">new</span> <span class="token class-name">a</span><span class="token operator">?.</span><span class="token function">b</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment">// 链判断运算符的右侧有模板字符串</span>
a<span class="token operator">?.</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">{b}</span><span class="token template-punctuation string">`</span></span>
a<span class="token operator">?.</span>b<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">{c}</span><span class="token template-punctuation string">`</span></span>

<span class="token comment">// 链判断运算符的左侧是 super</span>
<span class="token keyword">super</span><span class="token operator">?.</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">super</span><span class="token operator">?.</span>foo

<span class="token comment">// 链运算符用于赋值运算符左侧</span>
a<span class="token operator">?.</span>b <span class="token operator">=</span> c
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><!--]--></div><p>（4）右侧不得为十进制数值</p><p>为了保证兼容以前的代码，允许 foo?.3:0 被解析成 foo ? .3 : 0，因此规定如果?.后面紧跟一个十进制数字，那么?.不再被看成是一个完整的运算符，而会按照三元运算符进行处理，也就是说，那个小数点会归属于后面的十进制数字，形成一个小数。</p><h2 id="null-判断运算符" tabindex="-1">Null 判断运算符 <a class="header-anchor" href="#null-判断运算符" aria-hidden="true">#</a></h2><p>读取对象属性的时候，如果某个属性的值是 null 或 undefined，有时候需要为它们指定默认值。常见做法是通过||运算符指定默认值。</p><div class="code-block" data-v-4a08e5d5><!----><!--[--><div class="language-js line-numbers-mode"><pre><code><span class="token keyword">const</span> headerText <span class="token operator">=</span> response<span class="token punctuation">.</span>settings<span class="token punctuation">.</span>headerText <span class="token operator">||</span> <span class="token string">&#39;Hello, world!&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> animationDuration <span class="token operator">=</span> response<span class="token punctuation">.</span>settings<span class="token punctuation">.</span>animationDuration <span class="token operator">||</span> <span class="token number">300</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> showSplashScreen <span class="token operator">=</span> response<span class="token punctuation">.</span>settings<span class="token punctuation">.</span>showSplashScreen <span class="token operator">||</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><!--]--></div><p>上面的三行代码都通过||运算符指定默认值，但是这样写是错的。开发者的原意是，只要属性的值为 null 或 undefined，默认值就会生效，但是<strong>属性的值如果为空字符串或 false 或 0</strong>，默认值也会生效。</p><p>为了避免这种情况，ES2020 引入了一个新的 Null 判断运算符??。它的行为类似||，但是<strong>只有运算符左侧的值为 null 或 undefined 时</strong>，才会返回右侧的值。</p><div class="code-block" data-v-4a08e5d5><!----><!--[--><div class="language-js line-numbers-mode"><pre><code><span class="token keyword">const</span> headerText <span class="token operator">=</span> response<span class="token punctuation">.</span>settings<span class="token punctuation">.</span>headerText <span class="token operator">??</span> <span class="token string">&#39;Hello, world!&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> animationDuration <span class="token operator">=</span> response<span class="token punctuation">.</span>settings<span class="token punctuation">.</span>animationDuration <span class="token operator">??</span> <span class="token number">300</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> showSplashScreen <span class="token operator">=</span> response<span class="token punctuation">.</span>settings<span class="token punctuation">.</span>showSplashScreen <span class="token operator">??</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><!--]--></div><p>上面代码中，默认值只有在左侧属性值为 null 或 undefined 时，才会生效。</p><p>这个运算符的一个目的，就是跟链判断运算符?.配合使用，为 null 或 undefined 的值设置默认值。</p><div class="code-block" data-v-4a08e5d5><!----><!--[--><div class="language-js line-numbers-mode"><pre><code><span class="token keyword">const</span> animationDuration <span class="token operator">=</span> response<span class="token punctuation">.</span>settings<span class="token operator">?.</span>animationDuration <span class="token operator">??</span> <span class="token number">300</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><!--]--></div><p>上面代码中，如果 response.settings 是 null 或 undefined，或者 response.settings.animationDuration 是 null 或 undefined，就会返回默认值 300。也就是说，这一行代码包括了两级属性的判断。</p><p>这个运算符很适合判断函数参数是否赋值</p><div class="code-block" data-v-4a08e5d5><!----><!--[--><div class="language-js line-numbers-mode"><pre><code><span class="token keyword">function</span> <span class="token function">Component</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> enable <span class="token operator">=</span> props<span class="token punctuation">.</span>enabled <span class="token operator">??</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
  <span class="token comment">// …</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><!--]--></div><p>上面代码判断 props 参数的 enabled 属性是否赋值，基本等同于下面的写法。</p><div class="code-block" data-v-4a08e5d5><!----><!--[--><div class="language-js line-numbers-mode"><pre><code><span class="token keyword">function</span> <span class="token function">Component</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> enabled<span class="token operator">:</span> enable <span class="token operator">=</span> <span class="token boolean">true</span> <span class="token punctuation">}</span> <span class="token operator">=</span> props<span class="token punctuation">;</span>
  <span class="token comment">// …</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><!--]--></div><div class="danger custom-block"><p class="custom-block-title">WARNING</p><p>??本质上是逻辑运算，它与其他两个逻辑运算符&amp;&amp;和||有一个优先级问题，它们之间的优先级到底孰高孰低。优先级的不同，往往会导致逻辑运算的结果不同。</p></div><p>现在的规则是，如果多个逻辑运算符一起使用，<strong>必须用括号表明优先级</strong>，否则会报错。</p><div class="code-block" data-v-4a08e5d5><!----><!--[--><div class="language-js line-numbers-mode"><pre><code><span class="token comment">// 报错</span>
lhs <span class="token operator">&amp;&amp;</span> middle <span class="token operator">??</span> rhs
lhs <span class="token operator">??</span> middle <span class="token operator">&amp;&amp;</span> rhs
lhs <span class="token operator">||</span> middle <span class="token operator">??</span> rhs
lhs <span class="token operator">??</span> middle <span class="token operator">||</span> rhs
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><!--]--></div><p>上面四个表达式都会报错，必须加入表明优先级的括号。</p><div class="code-block" data-v-4a08e5d5><!----><!--[--><div class="language-js line-numbers-mode"><pre><code><span class="token punctuation">(</span>lhs <span class="token operator">&amp;&amp;</span> middle<span class="token punctuation">)</span> <span class="token operator">??</span> rhs<span class="token punctuation">;</span>
lhs <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>middle <span class="token operator">??</span> rhs<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token punctuation">(</span>lhs <span class="token operator">??</span> middle<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> rhs<span class="token punctuation">;</span>
lhs <span class="token operator">??</span> <span class="token punctuation">(</span>middle <span class="token operator">&amp;&amp;</span> rhs<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token punctuation">(</span>lhs <span class="token operator">||</span> middle<span class="token punctuation">)</span> <span class="token operator">??</span> rhs<span class="token punctuation">;</span>
lhs <span class="token operator">||</span> <span class="token punctuation">(</span>middle <span class="token operator">??</span> rhs<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token punctuation">(</span>lhs <span class="token operator">??</span> middle<span class="token punctuation">)</span> <span class="token operator">||</span> rhs<span class="token punctuation">;</span>
lhs <span class="token operator">??</span> <span class="token punctuation">(</span>middle <span class="token operator">||</span> rhs<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><!--]--></div><h2 id="逻辑赋值运算符" tabindex="-1">逻辑赋值运算符 <a class="header-anchor" href="#逻辑赋值运算符" aria-hidden="true">#</a></h2><p>ES2021 引入了三个新的逻辑赋值运算符（logical assignment operators），将逻辑运算符与赋值运算符进行结合。</p><div class="code-block" data-v-4a08e5d5><!----><!--[--><div class="language-js line-numbers-mode"><pre><code><span class="token comment">// 或赋值运算符</span>
x <span class="token operator">||=</span> y<span class="token punctuation">;</span>
<span class="token comment">// 等同于</span>
x <span class="token operator">||</span> <span class="token punctuation">(</span>x <span class="token operator">=</span> y<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 与赋值运算符</span>
x <span class="token operator">&amp;&amp;=</span> y<span class="token punctuation">;</span>
<span class="token comment">// 等同于</span>
x <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>x <span class="token operator">=</span> y<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Null 赋值运算符</span>
x <span class="token operator">??=</span> y<span class="token punctuation">;</span>
<span class="token comment">// 等同于</span>
x <span class="token operator">??</span> <span class="token punctuation">(</span>x <span class="token operator">=</span> y<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><!--]--></div><p>这三个运算符||=、&amp;&amp;=、??=相当于先进行逻辑运算，然后根据运算结果，再视情况进行赋值运算。</p><p>它们的一个用途是，为变量或属性设置默认值。</p><div class="code-block" data-v-4a08e5d5><!----><!--[--><div class="language-js line-numbers-mode"><pre><code><span class="token comment">// 老的写法</span>
user<span class="token punctuation">.</span>id <span class="token operator">=</span> user<span class="token punctuation">.</span>id <span class="token operator">||</span> <span class="token number">1</span><span class="token punctuation">;</span>

<span class="token comment">// 新的写法</span>
user<span class="token punctuation">.</span>id <span class="token operator">||=</span> <span class="token number">1</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><!--]--></div><p>上面示例中，<a href="http://user.id" target="_blank" rel="noopener noreferrer">user.id</a> 属性如果不存在，则设为 1，新的写法比老的写法更紧凑一些。</p><p>下面是另一个例子。</p><div class="code-block" data-v-4a08e5d5><!----><!--[--><div class="language-js line-numbers-mode"><pre><code><span class="token keyword">function</span> <span class="token function">example</span><span class="token punctuation">(</span><span class="token parameter">opts</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  opts<span class="token punctuation">.</span>foo <span class="token operator">=</span> opts<span class="token punctuation">.</span>foo <span class="token operator">??</span> <span class="token string">&#39;bar&#39;</span><span class="token punctuation">;</span>
  opts<span class="token punctuation">.</span>baz <span class="token operator">??</span> <span class="token punctuation">(</span>opts<span class="token punctuation">.</span>baz <span class="token operator">=</span> <span class="token string">&#39;qux&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><!--]--></div><p>上面示例中，参数对象 opts 如果不存在属性 foo 和属性 baz，则为这两个属性设置默认值。有了“Null 赋值运算符”以后，就可以统一写成下面这样。</p><div class="code-block" data-v-4a08e5d5><!----><!--[--><div class="language-js line-numbers-mode"><pre><code><span class="token keyword">function</span> <span class="token function">example</span><span class="token punctuation">(</span><span class="token parameter">opts</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  opts<span class="token punctuation">.</span>foo <span class="token operator">??=</span> <span class="token string">&#39;bar&#39;</span><span class="token punctuation">;</span>
  opts<span class="token punctuation">.</span>baz <span class="token operator">??=</span> <span class="token string">&#39;qux&#39;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><!--]--></div></div></div><footer class="page-footer" data-v-7eddb2c4 data-v-fb8d84c6><div class="edit" data-v-fb8d84c6><div class="edit-link" data-v-fb8d84c6 data-v-1ed99556><!----></div></div><div class="updated" data-v-fb8d84c6><!----></div></footer><!----><!--[--><!--]--></div></main></div><!----><!--]--><!--]--></div>
    <script>__VP_HASH_MAP__ = JSON.parse("{\"components_alert.md\":\"56a8f896\",\"components_avatar.md\":\"e3c48c3d\",\"components_button.md\":\"94f6c8f1\",\"components_icon.md\":\"82a143c6\",\"components_index.md\":\"841750d8\",\"getting-started.md\":\"cd78be78\",\"index.md\":\"8805985d\",\"learns_deploy_add-travis-ci.md\":\"bf0afa4d\",\"learns_deploy_add-travis-icon.md\":\"8cd9a2d5\",\"learns_deploy_aliyun-deploy-gitlab-frozen.md\":\"a19f74a7\",\"learns_deploy_aliyun-setup-gitlab-base-on-ecs.md\":\"0943e01a\",\"learns_index.md\":\"3c5a03f9\",\"learns_javascript_api-array.md\":\"96615f48\",\"learns_javascript_api-object.md\":\"55c6a2d8\",\"learns_javascript_apply-and-call.md\":\"86aa1e4f\",\"learns_javascript_es6-extend.md\":\"728345d1\",\"learns_javascript_es6-new-operators.md\":\"e2720d3a\",\"learns_javascript_how-to-achieve-symbol.md\":\"f644a6d6\",\"learns_javascript_html-element-api.md\":\"151ede74\",\"learns_javascript_instanceof-and-typeof.md\":\"16e839b8\",\"learns_javascript_js-bind.md\":\"a3a16811\",\"learns_javascript_js-event-loop.md\":\"2fb5d41f\",\"learns_javascript_js-float-trap.md\":\"a275b967\",\"learns_javascript_js-iife.md\":\"7aaecfb4\",\"learns_javascript_js-memory.md\":\"8b4ab2e3\",\"learns_javascript_js-new.md\":\"9e990073\",\"learns_javascript_js-object-setter-getter.md\":\"2012936c\",\"learns_javascript_js-prototype.md\":\"db3f968d\",\"learns_javascript_js-settimeout.md\":\"582459ee\",\"learns_javascript_map-parseint.md\":\"36737f0c\",\"learns_javascript_nine-console.md\":\"0dfc670d\",\"learns_javascript_promise.md\":\"4733a3e4\",\"learns_javascript_static-scope-and-auto-scrope.md\":\"60458683\",\"learns_javascript_throttle-and-debounce.md\":\"36f04724\",\"learns_security_xss-and-csrf.md\":\"9077fad8\",\"utils_index.md\":\"319ebe2d\"}")</script>
    <script type="module" async src="./assets/app.6f31ad5d.js"></script>
    
  </body>
</html>